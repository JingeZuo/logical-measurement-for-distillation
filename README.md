import numpy as np
from qiskit import *
import matplotlib.pyplot as plt
from qiskit.quantum_info import *
from qiskit.circuit.library import *
from qiskit.circuit import Gate, QuantumCircuit, ControlledGate
from qiskit import QuantumRegister
#%%
q1=QuantumRegister(1,'|+>\u2081')
q2=QuantumRegister(1,'|+>\u2082')
q3=QuantumRegister(1,'|+>\u2083')
q342=QuantumRegister(1,'|+>\u2083\u2084\u2082')
q143=QuantumRegister(1,'|+>\u2081\u2084\u2083')
q4=QuantumRegister(1,'|0>\u2084')
q741=QuantumRegister(1,'|+>\u2087\u2084\u2081')
q352=QuantumRegister(1,'|+>\u2083\u2085\u2082')
q253=QuantumRegister(1,'|+>\u2082\u2085\u2083')
q5=QuantumRegister(1,'|0>\u2085')
q751=QuantumRegister(1,'|+>\u2087\u2085\u2081')
q361=QuantumRegister(1,'|+>\u2083\u2086\u2081')
q262=QuantumRegister(1,'|+>\u2082\u2086\u2082')
q163=QuantumRegister(1,'|+>\u2081\u2086\u2083')
q6=QuantumRegister(1,'|0>\u2086')
q272=QuantumRegister(1,'|+>\u2082\u2087\u2082')
q173=QuantumRegister(1,'|+>\u2081\u2087\u2083')
q7=QuantumRegister(1,'|0>\u2087')
q871=QuantumRegister(1,'|+>\u2088\u2087\u2081')
q8=QuantumRegister(1,'|+>\u2088')
q0=QuantumRegister(36,'|0>')
c=ClassicalRegister(36)
qc=QuantumCircuit(q1,q2,q3,q342,q143,q4,q741,q352,q253,q5,q751,q361,
                  q262,q163,q6,q272,q173,q7,q871,q8,q0,c)
qc.h(q0)
qc.barrier()
Z=Operator(ZGate())
X=Operator(XGate())
ZZ=Z.tensor(Z)
XX=X.tensor(X)

XXGate871=UnitaryGate(XX,label='X\u2088X\u2088\u2087\u2081')
ZZGate871=UnitaryGate(ZZ,label='Z\u2088\u2087\u2081Z\u2088')
CXXGate871=XXGate871.control()
CZZGate871=ZZGate871.control()
CZ871=UnitaryGate(Z,label='Z\u2088\u2087\u2081').control()
qc.append(CXXGate871,[q0[0],q8,q871])
qc.append(CZZGate871,[q0[1],q871,q7])
qc.append(CZ871,[q0[2],q871])
qc.barrier()

XXGate751=UnitaryGate(XX,label='X\u2087X\u2087\u2085\u2081')
ZZGate751=UnitaryGate(ZZ,label='Z\u2087\u2085\u2081Z\u2085')
CXXGate751=XXGate751.control()
CZZGate751=ZZGate751.control()
CZ751=UnitaryGate(Z,label='Z\u2087\u2085\u2081').control()
qc.append(CXXGate751,[q0[3],q7,q751])
qc.append(CZZGate751,[q0[4],q751,q5])
qc.append(CZ751,[q0[5],q751])
qc.barrier()

XXGate741=UnitaryGate(XX,label='X\u2087X\u2087\u2084\u2081')
ZZGate741=UnitaryGate(ZZ,label='Z\u2087\u2084\u2081Z\u2084')
CXXGate741=XXGate741.control()
CZZGate741=ZZGate741.control()
CZ741=UnitaryGate(Z,label='Z\u2087\u2084\u2081').control()
qc.append(CXXGate741,[q0[6],q7,q741])
qc.append(CZZGate741,[q0[7],q741,q4])
qc.append(CZ741,[q0[8],q741])
qc.barrier()

XXGate342=UnitaryGate(XX,label='X\u2083X\u2083\u2084\u2082')
ZZGate342=UnitaryGate(ZZ,label='Z\u2083\u2084\u2082Z\u2084')
CXXGate342=XXGate342.control()
CZZGate342=ZZGate342.control()
CZ342=UnitaryGate(Z,label='Z\u2083\u2084\u2082').control()
qc.append(CXXGate342,[q0[9],q3,q342])
qc.append(CZZGate342,[q0[10],q342,q4])
qc.append(CZ342,[q0[11],q342])
qc.barrier()

XXGate352=UnitaryGate(XX,label='X\u2083X\u2083\u2085\u2082')
ZZGate352=UnitaryGate(ZZ,label='Z\u2083\u2085\u2082Z\u2085')
CXXGate352=XXGate352.control()
CZZGate352=ZZGate352.control()
CZ352=UnitaryGate(Z,label='Z\u2083\u2085\u2082').control()
qc.append(CXXGate352,[q0[12],q3,q352])
qc.append(CZZGate352,[q0[13],q352,q5])
qc.append(CZ352,[q0[14],q352])
qc.barrier()

XXGate361=UnitaryGate(XX,label='X\u2083X\u2083\u2086\u2081')
ZZGate361=UnitaryGate(ZZ,label='Z\u2083\u2086\u2081Z\u2086')
CXXGate361=XXGate361.control()
CZZGate361=ZZGate361.control()
CZ361=UnitaryGate(Z,label='Z\u2083\u2086\u2081').control()
qc.append(CXXGate361,[q0[15],q3,q361])
qc.append(CZZGate361,[q0[16],q361,q6])
qc.append(CZ361,[q0[17],q361])
qc.barrier()

XXGate253=UnitaryGate(XX,label='X\u2082X\u2082\u2085\u2083')
ZZGate253=UnitaryGate(ZZ,label='Z\u2082\u2085\u2083Z\u2085')
CXXGate253=XXGate253.control()
CZZGate253=ZZGate253.control()
CZ253=UnitaryGate(Z,label='Z\u2082\u2085\u2083').control()
qc.append(CXXGate253,[q0[18],q2,q253])
qc.append(CZZGate253,[q0[19],q253,q5])
qc.append(CZ253,[q0[20],q253])
qc.barrier()

XXGate262=UnitaryGate(XX,label='X\u2082X\u2082\u2086\u2082')
ZZGate262=UnitaryGate(ZZ,label='Z\u2082\u2086\u2082Z\u2086')
CXXGate262=XXGate262.control()
CZZGate262=ZZGate262.control()
CZ262=UnitaryGate(Z,label='Z\u2082\u2086\u2082').control()
qc.append(CXXGate262,[q0[21],q2,q262])
qc.append(CZZGate262,[q0[22],q262,q6])
qc.append(CZ262,[q0[23],q262])
qc.barrier()

XXGate272=UnitaryGate(XX,label='X\u2082X\u2082\u2087\u2082')
ZZGate272=UnitaryGate(ZZ,label='Z\u2082\u2087\u2082Z\u2087')
CXXGate272=XXGate272.control()
CZZGate272=ZZGate272.control()
CZ272=UnitaryGate(Z,label='Z\u2082\u2087\u2082').control()
qc.append(CXXGate272,[q0[24],q2,q272])
qc.append(CZZGate272,[q0[25],q272,q7])
qc.append(CZ272,[q0[26],q272])
qc.barrier()

XXGate143=UnitaryGate(XX,label='X\u2081X\u2081\u2084\u2083')
ZZGate143=UnitaryGate(ZZ,label='Z\u2081\u2084\u2083Z\u2084')
CXXGate143=XXGate143.control()
CZZGate143=ZZGate143.control()
CZ143=UnitaryGate(Z,label='Z\u2081\u2084\u2083').control()
qc.append(CXXGate143,[q0[27],q1,q143])
qc.append(CZZGate143,[q0[28],q143,q4])
qc.append(CZ143,[q0[29],q143])
qc.barrier()

XXGate163=UnitaryGate(XX,label='X\u2081X\u2081\u2086\u2083')
ZZGate163=UnitaryGate(ZZ,label='Z\u2081\u2086\u2083Z\u2086')
CXXGate163=XXGate163.control()
CZZGate163=ZZGate163.control()
CZ163=UnitaryGate(Z,label='Z\u2081\u2086\u2083').control()
qc.append(CXXGate163,[q0[30],q1,q163])
qc.append(CZZGate163,[q0[31],q163,q6])
qc.append(CZ163,[q0[32],q163])
qc.barrier()

XXGate173=UnitaryGate(XX,label='X\u2081X\u2081\u2087\u2083')
ZZGate173=UnitaryGate(ZZ,label='Z\u2081\u2087\u2083Z\u2087')
CXXGate173=XXGate173.control()
CZZGate173=ZZGate173.control()
CZ173=UnitaryGate(Z,label='Z\u2081\u2087\u2083').control()
qc.append(CXXGate173,[q0[33],q1,q173])
qc.append(CZZGate173,[q0[34],q173,q7])
qc.append(CZ173,[q0[35],q173])
SL=UnitaryGate(Operator(SGate()),label="S")
MX=UnitaryGate(Operator(SGate()),label="MX")
qc.barrier()
qc.append(SL,[q1])
qc.append(SL,[q2])
qc.append(SL,[q3])
qc.append(SL,[q4])
qc.append(SL,[q5])
qc.append(SL,[q6])
qc.append(SL,[q7])
qc.append(SL,[q8])
qc.append(MX,[q1])
qc.append(MX,[q2])
qc.append(MX,[q3])
qc.append(MX,[q4])
qc.append(MX,[q5])
qc.append(MX,[q6])
qc.append(MX,[q7])
qc.append(MX,[q8])
qc.barrier()
qc.h(q0)
for i in range(0,len(q0)):
    qc.measure(q0[i],c[i])
qc.draw()
plt.show()
